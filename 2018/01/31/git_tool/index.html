<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Linux使用--Git | Xfae&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="概述Git是一个分布式版本控制系统，初期是用于管理Linux系统代码，分布式版本控制系统可以不用中央服务器，但通常为了交换数据方便，也会有一台中央服务器，如GitHub就是提供仓库托管服务的；GitHub为开源项目提供免费Git储存，本文主要介绍Git的使用 环境操作系统： Debian 9.0 x64  大纲1. 安装Git2. 创建版本库3. 管理版本库4. 远程仓库5. 分支管理6. 标签管">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux使用--Git">
<meta property="og:url" content="http://yoursite.com/2018/01/31/git_tool/index.html">
<meta property="og:site_name" content="Xfae&#39;s Blog">
<meta property="og:description" content="概述Git是一个分布式版本控制系统，初期是用于管理Linux系统代码，分布式版本控制系统可以不用中央服务器，但通常为了交换数据方便，也会有一台中央服务器，如GitHub就是提供仓库托管服务的；GitHub为开源项目提供免费Git储存，本文主要介绍Git的使用 环境操作系统： Debian 9.0 x64  大纲1. 安装Git2. 创建版本库3. 管理版本库4. 远程仓库5. 分支管理6. 标签管">
<meta property="og:updated_time" content="2018-02-02T16:31:36.556Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux使用--Git">
<meta name="twitter:description" content="概述Git是一个分布式版本控制系统，初期是用于管理Linux系统代码，分布式版本控制系统可以不用中央服务器，但通常为了交换数据方便，也会有一台中央服务器，如GitHub就是提供仓库托管服务的；GitHub为开源项目提供免费Git储存，本文主要介绍Git的使用 环境操作系统： Debian 9.0 x64  大纲1. 安装Git2. 创建版本库3. 管理版本库4. 远程仓库5. 分支管理6. 标签管">
  
    <link rel="alternate" href="/atom.xml" title="Xfae&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xfae&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-git_tool" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/31/git_tool/" class="article-date">
  <time datetime="2018-01-31T04:54:46.000Z" itemprop="datePublished">2018-01-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Linux使用--Git
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Git是一个分布式版本控制系统，初期是用于管理Linux系统代码，分布式版本控制系统可以不用中央服务器，但通常为了交换数据方便，也会有一台中央服务器，如GitHub就是提供仓库托管服务的；GitHub为开源项目提供免费Git储存，本文主要介绍Git的使用</p>
<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>操作系统：<strong> Debian 9.0 x64 </strong></p>
<h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><p><a href="#t1">1. 安装Git</a><br><a href="#t2">2. 创建版本库</a><br><a href="#t3">3. 管理版本库</a><br><a href="#t4">4. 远程仓库</a><br><a href="#t5">5. 分支管理</a><br><a href="#t6">6. 标签管理</a><br><a href="#t7">7. 使用GitHub</a><br><a href="#t8">8. Git自定义配置</a><br><a href="#t9">9. Git服务器搭建</a></p>
<h2 id="详细"><a href="#详细" class="headerlink" title="详细"></a>详细</h2><h3 id="1-安装Git"><a href="#1-安装Git" class="headerlink" title="1. 安装Git"></a><span id="t1">1. 安装Git</span></h3><p>安装Git版本控制工具只需在Bash中执行命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure>
<p>安装完成后配置用户名和邮箱，在Bash中执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"your github name"</span></span><br><span class="line">$ git config --global user.email <span class="string">"your github email"</span></span><br></pre></td></tr></table></figure>
<p>如需查看配置，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --list</span><br></pre></td></tr></table></figure>
<h3 id="2-创建版本库"><a href="#2-创建版本库" class="headerlink" title="2. 创建版本库"></a><span id="t2">2. 创建版本库</span></h3><p>进入需要创建成Git仓库的目录下，在Bash中执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure>
<p>该命令会在当前目录下新建一个名为”.git”的文件夹，里面的文件是Git用来管理该版本库的，最好不要随便修改；<br>版本控制系统只能跟踪文本文件的改动，不能跟踪二进制文件的变化；另外在Windows下不要使用记事本编辑文本文件，因为它保存的UTF-8编码的文件开头会添加0xefbbbf的字符；把需要版本管理的文件放在仓库目录或子目录里，使用以下命令添加和提交文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git add filename</span><br><span class="line">$ git commit -m <span class="string">"the commit description"</span></span><br></pre></td></tr></table></figure>
<h3 id="3-管理版本库"><a href="#3-管理版本库" class="headerlink" title="3. 管理版本库"></a><span id="t3">3. 管理版本库</span></h3><p>首先需要了解工作区/暂存区/主分支/版本库之间的关系；可以把刚才使用”git init”命令所在的文件夹看作工作区，不包括里面的”.git”目录；而”.git”目录可以看作版本库；在版本库里面包含暂存区与主分支master；版本库里面还有一个名为HEAD的指针指向master；使用”git add”命令时，实际上是把修改添加到暂存区；当使用”git commit”后，才把暂存区所有的修改提交到master；</p>
<p>在仓库目录文件夹下，可以使用以下命令查看当前仓库状态：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br></pre></td></tr></table></figure>
<p>之前的”git add”命令实际上是把文件的修改提交到暂存区；当使用”git commit”之后才正式将文件合并到主分支；<br>如果想查看一些文件做了哪些改动，可执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff  <span class="comment">#可加上类似"HEAD -- filename"的参数；</span></span><br></pre></td></tr></table></figure>
<p>该命令会将工作区的文件与最近一次”add”或”commit”的文件进行比较，输出diff格式；Git跟踪并管理的是修改，不是文件；<br>如果要查看主分支的提交记录，可执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span>   <span class="comment">#可加上"--pretty=oneline"输出单行信息；</span></span><br></pre></td></tr></table></figure>
<p>该命令会输出主分支的提交日志，其中最前面的一串长度为40的数值是commit id(版本号)，是使用SHA1计算得到的；<br>如果需要回退到上一个版本，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br></pre></td></tr></table></figure>
<p>其中HEAD表示当前版本，HEAD^表示上一个版本，以此类推；或者使用HEAD~5表示往上5个版本；该参数也可以使用版本号代替；<br>如果回退到之前版本后又想返回新版本，以上命令就必须使用commit id作为参数；如果不记得commit id，可使用使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br></pre></td></tr></table></figure>
<p>Git会记录对主分支的commit/reset/checkout/merge等操作，使用该命令即可查看操作记录；<br>如果要撤销修改，需要分为三种情况：未提交到暂存区/已提交到暂存区/已提交到本地版本库；<br>对于第一种情况，需要取消工作区修改，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- filename</span><br></pre></td></tr></table></figure>
<p>该命令会把名为”filename”的文件在工作区的修改全部取消，使该文件回到最近一次commit或add的状态；<br>对与第二种情况，需要取消暂存区修改，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD filename</span><br></pre></td></tr></table></figure>
<p>该命令会撤销暂存区的修改，但不影响工作区的修改；此时工作区与HEAD还是存在差异的，若要取消工作区修改，可参考第一种情况；<br>对于第三中情况，需要对版本进行回退，比如回退到上一个版本：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br></pre></td></tr></table></figure>
<p>工作区中删除了文件也是属于修改操作，可以使用以下命令删除文件并提交修改：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git rm filename   <span class="comment">#效果与删除文件后执行"git add filename"似乎是一样的</span></span><br><span class="line">$ git commit -m <span class="string">"remove filename"</span></span><br></pre></td></tr></table></figure>
<p>删除文件后，如果想要恢复，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- filename</span><br></pre></td></tr></table></figure>
<p>该命令会使文件回到最近一次commit或add的状态，但使用”git rm”后文件就已经处于add状态，所以可能会丢失最近一次提交后修改的内容；</p>
<h3 id="4-远程仓库"><a href="#4-远程仓库" class="headerlink" title="4. 远程仓库"></a><span id="t4">4. 远程仓库</span></h3><p>以GitHub为例，首先需要生成密钥文件，在Bash中执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -C <span class="string">"your github email"</span></span><br></pre></td></tr></table></figure>
<p>接下来会询问路径和密码，直接回车默认即可；执行成功后会在～/.ssh目录下生成密钥文件；<br>打开GitHub-Settings-SSH and GPG keys-New SSH key，在Key文本框中填入刚生成的id-rsa.pub文件里的内容，Title任意；<br>配置完成后需测试，在Bash中执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh git@github.com</span><br></pre></td></tr></table></figure>
<p>如果执行结果中出现”Hello xxxx!”的字样，则说明配置成功，可通过SSH方式访问GitHub仓库；<br>完成以上操作后，需要在GitHub上创建一个新仓库；登录后点击右上角的加号，选择New repository，在页面中输入仓库名/描述等信息，点击创建；<br>创建好GitHub上的仓库后，可以进行两种操作，一个是克隆仓库到本地，另一个是把本地的仓库与新仓库关联；<br>对于第一种操作，一般适用与从零开始开发，可使用以下命令克隆仓库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@github.com:xxxx/xxxx.github.io.git  <span class="comment">#参数需要根据实际仓库地址修改，也可以添加文件夹参数</span></span><br></pre></td></tr></table></figure>
<p>该命令会在当前目录生成名为”xxxx.github.io”的文件夹，里面与GitHub上的内容一致；<br>该命令地址也可以使用https形式，但https形式每次推送必须输入口令；采用SSH协议速度最快；<br>文件修改完成后，可以使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master    <span class="comment">#Git中远程库默认名字为origin</span></span><br></pre></td></tr></table></figure>
<p>对于第二种操作，一般适用与本地已经存在项目文件，可使用以下命令关联远程仓库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin git@github.com:xxxx/xxxx.github.io.git</span><br></pre></td></tr></table></figure>
<p>其中origin为远程库的名字，可以使用其它名字；<br>关联远程库之后就可以将本地库的内容推送到远程库，使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure>
<p>该命令第一次使用时需要加上”-u”参数，执行后会将master分支的内容推送到远程的master分支，并将两个分支关联起来；以后推送就不用添加”-u”参数了；<br>另外，第一次使用clone或push命令时，可能会出现SSH警告需要确认服务器的Key的指纹信息来源，输入yes即可；如果需要对照指纹可以访问 <a href="https://help.github.com/articles/github-s-ssh-key-fingerprints" target="_blank" rel="noopener">GitHub’s SSH key fingerprints</a></p>
<h3 id="5-分支管理"><a href="#5-分支管理" class="headerlink" title="5. 分支管理"></a><span id="t5">5. 分支管理</span></h3><p>Git分支的工作原理，如果只有master分支，则HEAD指向master，master指向提交，每次该分支上提交master就会前进一步；如果创建一个dev分支，则创建一个指针指向master；切换分支，则将HEAD指向dev，之后的每次提交dev前进一步；合并分支，则把master指向dev的提交，如果只有一个子分支，则可以进行快速合并；合并之后，可以将dev分支删除掉；<br>创建dev分支并切换到该分支，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev   <span class="comment">#创建并切换</span></span><br></pre></td></tr></table></figure>
<p>该命令相当于以下两条命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git branch dev    <span class="comment">#创建</span></span><br><span class="line">$ bit checkout dev  <span class="comment">#切换</span></span><br></pre></td></tr></table></figure>
<p>查看当前分支，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch    <span class="comment">#输出结果中带*号的为当前分支</span></span><br></pre></td></tr></table></figure>
<p>合并分支，需要先切换回master分支，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git merge dev <span class="comment">#合并指定分支到当前分支</span></span><br></pre></td></tr></table></figure>
<p>合并完成后，可以把dev分支删除，使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -d dev <span class="comment">#删除分支</span></span><br></pre></td></tr></table></figure>
<p>当分支的提交出现分叉时，在合并时就可能会产生冲突，比如在master和dev下都各自有新的提交，此时无法进行快速合并；<br>当出现冲突时，merge命令会提示冲突及冲突文件，也可以使用status命令查看冲突文件，这时候就需要手动修改Git在冲突文件中标记出的不同内容，然后在add/commit；<br>分支合并完成后可以使用以下命令查看分支合并图：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --graph --pretty=oneline --abbrev-commit</span><br></pre></td></tr></table></figure>
<p>合并分支时如果使用Fast forward模式，删除分支后会丢失分支信息；如果想保留分支信息可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git merge --no-ff -m <span class="string">"merge with no-ff"</span> dev</span><br></pre></td></tr></table></figure>
<p>该命令会在merge时生成一个新的commit，故需要传入commit描述；<br>分支管理策略：基本分支包含master和dev，团队每个人有自己的分支；在master分支上发布稳定的新版本，每个人在自己的分支上提交，时不时向dev分支上合并，当dev分支稳定时可合并到master上；</p>
<p>当软件出现Bug时，可以创建一个新的分支来修复，修复完成再删除该分支；此时如果需要保存现在的工作现场，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash</span><br></pre></td></tr></table></figure>
<p>执行后使用status命令查看会提示工作是干净的；查看保存的工作现场可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash list</span><br></pre></td></tr></table></figure>
<p>此时可以使用以下其中一个命令恢复工作区：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply   <span class="comment">#恢复后stash不删除，需使用"git stash drop"命令删除</span></span><br><span class="line">$ git stash pop     <span class="comment">#恢复后同时将stash删除</span></span><br></pre></td></tr></table></figure>
<p>可以多次stash，恢复指定的stash可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git stash apply stash@&#123;0&#125; <span class="comment">#参数需根据实际情况修改</span></span><br></pre></td></tr></table></figure>
<p>软件没添加一个新功能最后新建一个feature分支，然后再开发/合并/删除；如果需要删除一个没有被合并的分支，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch  -D &lt;name&gt;</span><br></pre></td></tr></table></figure>
<p>从远程仓库克隆时，Git会自动关联本地与远程的master分支，远程库默认名称为origin；查看远程库可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote    <span class="comment">#添加"-v"参数可以显示详细信息</span></span><br></pre></td></tr></table></figure>
<p>把master分支上的提交推送到远程库，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure>
<p>也可以用来推送其它分支；通常需要团队协作的分支需要与远程同步，如master/dev分支；<br>clone命令默认情况下只克隆远程库的master分支；如需要在dev分支上开发，则克隆后需创建远程的dev到本地，使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b dev origin/dev</span><br></pre></td></tr></table></figure>
<p>如果远程分支上已有新的提交，并且与本地的修改文件也相同，此时会推送失败，需要先把最新的提交提取到本地，解决冲突后提交/推送；</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull  <span class="comment">#提取最新提交</span></span><br></pre></td></tr></table></figure>
<p>使用该命令时，本地的分支必须与远程分支链接，否则操作会失败，以dev分支为例，使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch --<span class="built_in">set</span>-upstream dev origin/dev  <span class="comment">#新版本的Git中参数建议写成"--set-upstream-to"</span></span><br></pre></td></tr></table></figure>
<p>多人协作工作模式：先尝试push；若推送失败，则使用pull尝试合并；若有冲突，则解决冲突后本地提交；再使用push推送；</p>
<h3 id="6-标签管理"><a href="#6-标签管理" class="headerlink" title="6. 标签管理"></a><span id="t6">6. 标签管理</span></h3><p>发布新版本时需要在版本库中打个标签，以方便记忆和查找；标签是跟某个commit绑定在一起的；<br>如果需要在当前分支的最新提交上打一个新标签，可使用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v1.0  <span class="comment">#可以在后面添加commit id参数打到指定commit上，如"git tag v1.0 6224937"</span></span><br></pre></td></tr></table></figure>
<p>如需要查看标签，可以用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag</span><br></pre></td></tr></table></figure>
<p>如果想查看某个标签详细信息，可使用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git show &lt;tagname&gt;</span><br></pre></td></tr></table></figure>
<p>如果要创建一个带有说明的标签，可使用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -a v1.0 -m <span class="string">"version 1.0 released"</span> 6224937</span><br></pre></td></tr></table></figure>
<p>该命令里的”-a”指定标签名，”-m”指定说明文字；<br>还可以使用私钥签名一个标签，命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -s v2.0 -m <span class="string">"signed version 2.0 released"</span> fec145a</span><br></pre></td></tr></table></figure>
<p>该命令签名使用PGP签名，故需要先安装gpg(GunPG)；</p>
<p>如果需要删除某个标签，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v1.0</span><br></pre></td></tr></table></figure>
<p>创建的标签都只存储在本地，不会自动推送到远程库；如果需要推送标签，可使用以下其中一条命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin &lt;tagname&gt; <span class="comment">#推送指定标签</span></span><br><span class="line">$ git push origin --tags    <span class="comment">#推送全部未推送的标签</span></span><br></pre></td></tr></table></figure>
<p>如果需要删除远程的某个标签，需要先将本地的标签删除，再使用push删除远程的标签，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git tag -d v1.0</span><br><span class="line">$ git push origin :refs/tags/v1.0</span><br></pre></td></tr></table></figure>
<h3 id="7-使用GitHub及码云"><a href="#7-使用GitHub及码云" class="headerlink" title="7. 使用GitHub及码云"></a><span id="t7">7. 使用GitHub及码云</span></h3><p>GitHub上参与项目流程：先到官方库项目主页下Fork一个源码仓库到自己的账号下；从自己账号下的仓库克隆到本地，如果直接从官方库克隆将不能提交修改；在本地完成修改后，就可以推送到自己账号下的远程仓库；如果希望官方库可以接受自己的修改，可以在GitHub上发起一个Pull request；</p>
<p>国内也有与GitHub相似的Git托管服务，以<a href="https://gitee.com" target="_blank" rel="noopener">码云</a>为例；Gitee与GitHub功能类似，并且提供有限制的免费私有库；在Gitee上创建库/配置SSH/PUSH等操作与GitHub上基本类似；<br>如果希望同时使用GitHub和Gitee，就必须在本地库上同时关联两个远程库，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v <span class="comment">#查看远程库详细信息</span></span><br><span class="line">$ git remote rm origin  <span class="comment">#删除已有远程库</span></span><br><span class="line">$ git remote add github git@github.com:xxxx/xxxx.github.io.git  <span class="comment">#此时GitHub远程库名称为"github"</span></span><br><span class="line">$ git remote add gitee git@gitee.com:xxxx/xxxx.gitee.git    <span class="comment">#此时Gitee远程库名称为"gitee"</span></span><br></pre></td></tr></table></figure>
<p>执行以上命令之后，使用push推送时的远程库名称就不再是origin了，比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git push github master    <span class="comment">#推送到GitHub</span></span><br><span class="line">$ git push gitee master     <span class="comment">#推送到Gitee</span></span><br></pre></td></tr></table></figure>
<h3 id="8-Git自定义配置"><a href="#8-Git自定义配置" class="headerlink" title="8. Git自定义配置"></a><span id="t8">8. Git自定义配置</span></h3><p>若想要Git的命令输出显示颜色，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global color.ui <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>如果需要Git忽略工作目录下的某些特殊文件，比如数据库密码配置文件/中间文件等，可在工作目录的根目录下新建”.gitignore”文件，然后将需要忽略的文件名填进去即可；也可以直接使用GitHub提供的配置文件<a href="https://github.com/github/gitignore" target="_blank" rel="noopener">.gitignore</a>；在提交的时候将”.gitignore”也提交到版本库；如果文件忽略成功，则status命令会提示”working directory clean”；<br>忽略文件的原则：忽略操作系统自动生成的文件；忽略编译生成的中间文件等；忽略带有敏感信息的文件；<br>如果想添加已经被忽略的文件到暂存区，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add -f filename   <span class="comment">#强制添加文件</span></span><br></pre></td></tr></table></figure>
<p>同时，如果想查看该文件是由.gitignore文件里的哪个规则忽略的，可以使用命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git check-ignore -v filename  <span class="comment">#检查规则</span></span><br></pre></td></tr></table></figure>
<p>若需要为命令配置别名，可使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.st status   <span class="comment">#将"status"命令别名配置为"st"</span></span><br></pre></td></tr></table></figure>
<p>该命令中的”–global”表示配置全局有效(当前操作系统用户)，如不加该参数，则只在当前库下有效；<br>另一个例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global alias.lg <span class="string">"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit"</span></span><br></pre></td></tr></table></figure>
<p>每个仓库都有一个配置文件，路径为”.git/config”，里面的配置与执行的config命令一致；当前用户的Git配置文件是用户目录下的”.gitconfig”文件；配置文件中的”[alias]”下对应各命令的别名；</p>
<h3 id="9-Git服务器搭建"><a href="#9-Git服务器搭建" class="headerlink" title="9. Git服务器搭建"></a><span id="t9">9. Git服务器搭建</span></h3><p>首先需要安装Git，Bash下执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure>
<p>需要创建一个git用户用于运行git服务，执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo adduser git</span><br></pre></td></tr></table></figure>
<p>收集所有需要登录用户的公钥，导入到/home/git/.git/authorized_keys文件中，一行一个；</p>
<p>选择一个目录作为Git仓库并初始化，如/srv/sample.git，在/srv目录中执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo git init --bare sample.git   <span class="comment">#服务器上的仓库通常以.git结尾</span></span><br></pre></td></tr></table></figure>
<p>把该仓库目录的所以者改为git，执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo chown -R git:git sample.git</span><br></pre></td></tr></table></figure>
<p>出于安全考虑，需禁用git用户的Shell登录，编辑/etc/passwd文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git:x:1001:1001:,,,:/home/git:/bin/bash</span><br><span class="line"> #修改为</span><br><span class="line">git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell    #git-shell每次一登录就退出</span><br></pre></td></tr></table></figure>
<p>修改完成后，git用户可以使用SSH但无法登录Shell；</p>
<p>完成以上步骤之后，就可以克隆远程仓库了，执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git@server:/srv/sample.git</span><br></pre></td></tr></table></figure>
<p>至此，服务器已经搭建完成；<br>若团队较多，收集每个人的公钥就比较困难，此时可以使用<a href="https://github.com/res0nat0r/gitosis" target="_blank" rel="noopener">Gitosis</a>管理公钥；<br>Git不支持权限控制，如需要进行权限控制，可以使用<a href="https://github.com/sitaramc/gitolite" target="_blank" rel="noopener">gitolite</a>；</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>[1]. <a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">Git教程</a><br>[2]. <a href="https://git-scm.com" target="_blank" rel="noopener">Git官网</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/31/git_tool/" data-id="cjd65de2d0001n2ow6u8wghky" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/">Linux</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/01/30/hexo_blog/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Linux使用--Hexo</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a><span class="tag-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Linux/" style="font-size: 10px;">Linux</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/31/git_tool/">Linux使用--Git</a>
          </li>
        
          <li>
            <a href="/2018/01/30/hexo_blog/">Linux使用--Hexo</a>
          </li>
        
          <li>
            <a href="/2018/01/29/markdown/">Linux使用--Markdown</a>
          </li>
        
          <li>
            <a href="/2018/01/29/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Xfce<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>